import{T as I}from"./Tag.66aee134.js";import{_ as N,m as S,n as V,S as _}from"./index.f72f2b6e.js";import{D as B,b,o as r,c as l,a,a7 as w,a8 as y,a9 as d,_ as c,f as k,w as f,F as p,r as v,A as E,B as M,C as j,p as A,n as C,t as x,g as D,l as z}from"./vendor.f62fa2d1.js";const H={name:"Context",components:{Tag:I},data(){return{activeIndex:0,contextName:"",input:""}},computed:{availableTags(){return this.$store.getters.allTags},contexts(){return this.$store.getters.sortedContexts},filtered(){return this.availableTags.filter(o=>o.startsWith(this.input.toLowerCase()))},selected(){return this.tags.sort()},tags(){return this.$store.state.context.tags}},methods:{discard(o){this.$store.commit(S,o)},down(){this.activeIndex<this.filtered.length-1&&(this.activeIndex+=1,this.scroll())},first(){this.activeIndex=0,this.$refs.tagsContainer.scrollElement.scroll(0,0)},focusInput(){this.$refs.input.focus()},save(){this.$store.commit(V,{id:B(),name:this.contextName,tags:this.tags}),this.contextName="",this.$store.dispatch(_,{context:{tags:[]}})},scroll(){const o=this.$refs.tagsContainer.scrollElement,t=this.$refs.tags[this.activeIndex],g=o.scrollTop,m=o.offsetHeight,n=t.offsetTop,s=t.offsetHeight;if(n+s-g>m){const u=n-m+s;o.scroll(0,u)}else n<g&&o.scroll(0,n)},selectTag(o){this.activeIndex=this.filtered.findIndex(t=>t===o),this.toggleTag(),this.focusInput(),this.scroll()},isSelected(o){return this.tags.includes(o)},toggleTag(){const o=this.filtered[this.activeIndex];if(o){let t=this.tags;t.includes(o)?t=t.filter(g=>g!==o):t=t.concat([o]),this.$store.dispatch(_,{context:{tags:t}})}},up(){this.activeIndex>0&&(this.activeIndex-=1,this.scroll())}},mounted(){this.$store.state.context.editing=!0,this.focusInput()},beforeUnmount(){this.$store.state.context.editing=!1}},i=o=>(E("data-v-9be1596a"),o=o(),M(),o),O={class:"container flex flex-col mx-auto p-4 md:px-16 md:py-8"},L=i(()=>a("h2",{class:"text-2xl"},"Context Switching",-1)),U=i(()=>a("p",{class:"mt-1 text-gray-500"}," A context allows you to focus on what's important now by filtering your docs down to just a handful of relevant tags. ",-1)),X={class:"mt-4"},F=i(()=>a("label",{for:"context-name"},"Name it and save it (optional)",-1)),G={class:"flex items-center mt-2"},K=["disabled"],R=i(()=>a("small",{class:"text-gray-700 mt-1 hidden md:block"},"You must add at least one tag and give the context a name in order to save it.",-1)),W={class:"mt-4"},Y=i(()=>a("label",{for:"tags-search"},"Choose some tags",-1)),q=j('<small class="text-gray-700 mt-1 hidden md:block" data-v-9be1596a>Navigate the list below with <span class="key" data-v-9be1596a>up</span> or <span class="key" data-v-9be1596a>down</span> and toggle tags with <span class="key" data-v-9be1596a>space</span> or <span class="key" data-v-9be1596a>enter</span></small>',1),J={key:0},P=["onClick"],Q={key:0},Z={key:1,class:"flex justify-between p-3"},$={class:"mt-4"},tt=i(()=>a("h3",{class:"text-xl mb-4"},"Saved Contexts",-1)),et={class:"grid gap-4 grid-cols-1 lg:grid-cols-2"},st={class:"flex items-center justify-between mb-4"},at={class:"text-lg flex items-center"},ot=i(()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),nt={class:"ml-2"},rt=["onClick"],lt=i(()=>a("svg",{height:"1.25em",width:"1.25em",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),it=i(()=>a("span",{class:"ml-2"},"Discard",-1)),dt=[lt,it],ct={class:"flex items-center flex-wrap"};function gt(o,t,g,m,n,s){const u=b("Tag"),T=b("SimpleBar");return r(),l("div",O,[a("div",null,[L,U,a("div",X,[F,a("div",G,[w(a("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.contextName=e),type:"text",class:"form-text w-full shadow",id:"context-name",placeholder:"Give this context a name..."},null,512),[[y,n.contextName]]),a("button",{onClick:t[1]||(t[1]=(...e)=>s.save&&s.save(...e)),disabled:!(s.tags.length&&n.contextName),class:"button button-size-medium button-color-gray disabled:text-gray-900 ml-2"},"Save",8,K)]),R]),a("div",W,[Y,w(a("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.input=e),onInput:t[3]||(t[3]=(...e)=>s.first&&s.first(...e)),onKeydown:[t[4]||(t[4]=d(c((...e)=>s.toggleTag&&s.toggleTag(...e),["prevent"]),["space"])),t[5]||(t[5]=d(c((...e)=>s.toggleTag&&s.toggleTag(...e),["exact"]),["enter"])),t[6]||(t[6]=d(c((...e)=>s.down&&s.down(...e),["prevent"]),["221"])),t[7]||(t[7]=d(c((...e)=>s.down&&s.down(...e),["prevent"]),["down"])),t[8]||(t[8]=d(c((...e)=>s.up&&s.up(...e),["prevent"]),["219"])),t[9]||(t[9]=d(c((...e)=>s.up&&s.up(...e),["prevent"]),["up"]))],ref:"input",type:"text",class:"form-text w-full mt-2",id:"tag-search",placeholder:"Start typing to filter the list...",autocomplete:"off"},null,544),[[y,n.input]]),q]),k(T,{ref:"tagsContainer",class:"border rounded mt-4 overflow-hidden bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-700"},{default:f(()=>[a("div",null,[s.filtered.length?(r(),l("div",J,[(r(!0),l(p,null,v(s.filtered,(e,h)=>(r(),l("div",{onClick:ht=>s.selectTag(e),key:e,ref_for:!0,ref:"tags",class:A(["flex justify-between cursor-pointer p-6 md:p-3 focus-within:ring",{"bg-gray-200 dark:bg-gray-700":s.isSelected(e),"bg-blue-300 dark:bg-blue-500":h===n.activeIndex}])},[k(u,null,{default:f(()=>[C(x(e),1)]),_:2},1024),s.isSelected(e)?(r(),l("span",Q,"selected")):D("",!0)],10,P))),128))])):(r(),l("div",Z,"No results..."))])]),_:1},512),a("div",$,[tt,a("div",et,[(r(!0),l(p,null,v(s.contexts,e=>(r(),l("div",{key:e.id,class:"shadow relative flex flex-col min-w-0 rounded p-4 bg-gray-100 dark:bg-gray-800 dark:text-gray-300"},[a("div",st,[a("h4",at,[ot,a("span",nt,x(e.name),1)]),a("button",{onClick:h=>s.discard(e),class:"button-flat button-size-medium text-sm text-red-500 bg-gray-200 dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700"},dt,8,rt)]),a("div",ct,[(r(!0),l(p,null,v(e.tags,h=>(r(),z(u,{key:h,class:"mr-6"},{default:f(()=>[C(x(h),1)]),_:2},1024))),128))])]))),128))])])])])}var pt=N(H,[["render",gt],["__scopeId","data-v-9be1596a"]]);export{pt as default};
